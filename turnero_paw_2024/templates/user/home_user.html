{% extends 'base.html' %}
{% load static %}
{% block title %}Home{% endblock title %}
{% block links %}
<link rel="preload" href="{% static 'css/reset.css' %}" 
            as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="{% static 'css/base.css' %}" 
            as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="{% static 'css/header.css' %}" 
            as="style" onload="this.onload=null;this.rel='stylesheet'">   
<link rel="preload" href="{% static 'css/user/home-user.css' %}" 
            as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="{% static 'css/user/search-part.css' %}" 
            as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="{% static 'css/shift/modal_shift_details.css' %}" 
            as="style" onload="this.onload=null;this.rel='stylesheet'">
{% endblock links %}
{% block content %}
    {% include 'includes/header.html' with show_nav=True show_avatar_user=True %}
    {% include 'includes/search-part.html' %}
    {% include 'shift/modal_shift_datails.html' %}
        <section id="shifts-container">
            <h2> Solicitud de turnos pendientes</h2>
            
                {% for shift in pending_shifts %}
                <section id="shifts-container__section">
                        {% if error_message %}
                            <p class="error-message">{{ error_message }}</p>
                        {% endif %}
                        <p>
                            <strong>
                                Solicitado por:
                            </strong>   
                            {{ shift.id_person.last_name }}
                            {{ shift.id_person.first_name }} 
                        </p>
                        <p>
                            <strong>
                                Email:
                            </strong> 
                                {{ shift.id_person.email }}
                        </p>
                        <p>
                            <strong>
                                Fecha:
                            </strong> 
                                {{ shift.date }}
                        </p>
                        <p>
                            <strong>
                                Hora:
                            </strong> 
                                {{ shift.hour }}
                        </p>
                    <span id="shifts-container-section__btns">
                        <a href="{% url 'user-confirm-shift' shift.id %}" 
                                class="acept-btn">Aceptar</a>
                        <a href="{% url 'user-cancel-shift' shift.id %}" 
                                class="cancel-btn">Cancelar</a>
                    </span>
                </section>
                {% empty %}
                    <p>No hay turnos pendientes.</p>
                {% endfor %}
            <section id="shifts-confirm-state-section">
                <section id="shifts-data-states-container">
                </section>
                <spam class="shifts-confirm-state-section__spam">
                    <button type="button" id="get-shift-pending-state-btn" data-state="pendiente">
                        Turnos Pendientes Hoy
                    </button>
                    <button type="button" id="get-shift-confirm-state-btn" data-state="confirmado">
                        Turnos Confirmados Hoy
                    </button>
                </spam>
            </section>
            
        </section>
    {% include 'includes/footer.html' %}
    <script type="module" src="{% static 'js/menu.js' %}" ></script>
    <script type="module" src="{% static 'js/shift/search-shift.js' %}" ></script>
    <script type="module" src="{% static 'js/shift/search-shift-confirm-state.js' %}" ></script>
{% endblock content %}